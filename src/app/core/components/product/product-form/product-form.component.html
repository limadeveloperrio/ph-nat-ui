<h2>{{ isNew ? 'Adicionar Produto' : 'Buscar/Editar Produto' }}</h2>

<!-- üîπ Campo de busca s√≥ aparece na rota /products/search -->
<div *ngIf="showSearchField" style="margin-bottom: 16px; display: flex; gap: 8px; align-items: center;">
  <mat-form-field appearance="outline" style="width: 150px;">
    <mat-label>ID</mat-label>
    <input matInput [formControl]="searchIdControl" placeholder="Digite o ID" />
  </mat-form-field>

  <button mat-raised-button color="primary" (click)="searchProduct()">
    <mat-icon>search</mat-icon> Buscar
  </button>
</div>

<form [formGroup]="form" (ngSubmit)="save()" style="max-width: 400px; margin-top: 16px;">
  <!-- Nome -->
  <mat-form-field appearance="outline" style="width: 100%;">
    <mat-label>Nome</mat-label>
    <input matInput formControlName="name" placeholder="Nome do produto" />
    <mat-error *ngIf="form.get('name')?.invalid && form.get('name')?.touched">
      Nome √© obrigat√≥rio.
    </mat-error>
  </mat-form-field>

  <!-- Pre√ßo -->
  <mat-form-field appearance="outline" style="width: 100%;">
    <mat-label>Pre√ßo</mat-label>
    <input matInput type="number" formControlName="price" placeholder="Pre√ßo em reais" />
    <mat-error *ngIf="form.get('price')?.invalid && form.get('price')?.touched">
      O pre√ßo deve ser maior ou igual a 0.
    </mat-error>
  </mat-form-field>

  <!-- Descri√ß√£o -->
  <mat-form-field appearance="outline" style="width: 100%;">
    <mat-label>Descri√ß√£o</mat-label>
    <textarea matInput rows="3" formControlName="description" placeholder="Descri√ß√£o do produto"></textarea>
  </mat-form-field>

  <!-- Bot√µes -->
  <div style="margin-top: 16px; display: flex; gap: 8px;">
    <button mat-raised-button color="primary" type="submit">
      {{ isNew ? 'Adicionar' : 'Salvar Altera√ß√µes' }}
    </button>
    <button mat-stroked-button color="warn" type="button" (click)="cancel()">
      Cancelar
    </button>
  </div>
</form>
